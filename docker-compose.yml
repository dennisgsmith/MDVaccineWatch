version: "3.9"

services:

    # Build scheduler to update s3
    scheduler:
        image: mdvaccinewatch-scheduler:latest
        container_name: mdvaccinewatch_scheduler_container
        build: ./scheduler
        environment:
        - AWS_S3_BUCKET

    # Build frantend webapp
    web:
        image: mdvaccinewatch-prod:latest
        container_name: mdvaccinewatch_webapp_container
        build: ./app
        environment:
        - PYTHONUNBUFFERED="stout"
        - MB_TOKEN
        - AWS_S3_BUCKET
        - PORT
        ports:
        - 8080:80